<%
	parent ||= nil
	mainClass = nil
	namespace = nil

	if parent
		formObject = parent.children.build
		namespace = "reply_to_#{parent.id}"
	else
		formObject = post.comments.build
		mainClass = "main_comment_form"
	end
%>

<%= form_for formObject, namespace: namespace, remote: true, format: :json, html: {class: "comment_form #{mainClass}"}, data: {target: target} do |f| %>
	<%= f.label :author %><br />
	<%= f.text_field :author %><br />
	<%= f.label :title %><br />
	<%= f.text_field :title %><br />
	<%= f.label :body %><br />
	<%= f.text_area :body %><br />
	<%= f.hidden_field :post_id %>
	<%= f.hidden_field :parent_id %>
	<%= f.submit "Comment" %>
	<%= f.button "Cancel", class: "cancel_comment" %>
<% end %>
